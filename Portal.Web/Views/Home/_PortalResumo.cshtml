@model GestaoSaudeIdosos.Web.ViewModels.DashboardViewModel

<h2>Painel geral</h2>
<p>Resumo das principais informações para apoiar a prevenção de doenças em idosos institucionalizados.</p>

<div class="dashboard-cards">
    <div class="card">
        <span class="card-title">Pacientes</span>
        <strong>@Model.TotalPacientes</strong>
        <small>Total de pacientes cadastrados</small>
    </div>
    <div class="card">
        <span class="card-title">Usuários</span>
        <strong>@Model.TotalUsuarios</strong>
        <small>Profissionais com acesso</small>
    </div>
    <div class="card">
        <span class="card-title">Formulários ativos</span>
        <strong>@Model.FormulariosAtivos</strong>
        <small>Instrumentos prontos para uso</small>
    </div>
    <div class="card @(Model.AlertasAtivos > 0 ? "alert" : string.Empty)">
        <span class="card-title">Alertas</span>
        <strong>@Model.AlertasAtivos</strong>
        <small>Riscos que demandam atenção</small>
    </div>
</div>

<div class="quick-actions">
    <a class="quick-card" asp-controller="Pacientes" asp-action="Create" data-open-tab data-tab="Pacientes" data-url='@Url.Action("Create", "Pacientes")'>
        <span>Adicionar paciente</span>
        <small>Cadastre idosos e vincule responsáveis</small>
    </a>
    <a class="quick-card" asp-controller="Campos" asp-action="Index" data-open-tab data-tab="Campos" data-url='@Url.Action("Index", "Campos")'>
        <span>Configurar campos</span>
        <small>Personalize perguntas reutilizáveis</small>
    </a>
    <a class="quick-card" asp-controller="Formularios" asp-action="Index" data-open-tab data-tab="Formulários" data-url='@Url.Action("Index", "Formularios")'>
        <span>Montar formulário</span>
        <small>Combine campos para avaliações</small>
    </a>
    <a class="quick-card" asp-controller="Graficos" asp-action="Index" data-open-tab data-tab="Gráficos" data-url='@Url.Action("Index", "Graficos")'>
        <span>Explorar gráficos</span>
        <small>Visualize indicadores dos pacientes</small>
    </a>
</div>

<div class="grid-two-columns">
    <section class="panel">
        <div class="panel-header">
            <h3>Formulários recentes</h3>
            <a asp-controller="Pacientes" asp-action="Create" class="btn-link" data-open-tab data-tab="Pacientes" data-url='@Url.Action("Create", "Pacientes")'>Aplicar formulário</a>
        </div>

        @if (!Model.FormulariosRecentes.Any())
        {
            <p class="empty-state">Nenhum formulário cadastrado.</p>
        }
        else
        {
            <ul class="list">
            @foreach (var form in Model.FormulariosRecentes)
            {
                <li>
                    <strong>@form.Descricao</strong>
                    <span>@form.CamposTotais campo(s) • @form.PacientesAssociados paciente(s)</span>
                    <small>Criado em @form.DataCadastro.ToString("dd/MM/yyyy")</small>
                </li>
            }
            </ul>
        }
    </section>

    <section class="panel">
        <div class="panel-header">
            <h3>Relatórios e sugestões</h3>
            <a asp-controller="Pacientes" asp-action="Index" class="btn-link">Ver todos</a>
        </div>

        @if (!Model.Relatorios.Any())
        {
            <p class="empty-state">Nenhum relatório disponível.</p>
        }
        else
        {
            <ul class="list">
            @foreach (var relatorio in Model.Relatorios)
            {
                <li>
                    <div class="list-title">
                        <strong>@relatorio.PacienteNome</strong>
                        <span class="status-badge @(relatorio.NivelRisco.ToLower() == "alto" ? "danger" : relatorio.NivelRisco.ToLower() == "moderado" ? "warning" : "success")">@relatorio.NivelRisco</span>
                    </div>
                    <span>@relatorio.Resumo</span>
                    <small>@relatorio.Sugestao</small>
                </li>
            }
            </ul>
        }
    </section>
</div>
