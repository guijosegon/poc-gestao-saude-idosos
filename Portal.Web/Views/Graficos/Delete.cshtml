@model GestaoSaudeIdosos.Web.ViewModels.GraficoDetalheViewModel
@using GestaoSaudeIdosos.Domain.Common.Helpers
@using GestaoSaudeIdosos.Web.Extensions
@{
    ViewData["Title"] = "Excluir gráfico";
}

<section class="page-header">
    <div>
        <h1>Excluir gráfico</h1>
        <p class="page-subtitle">Remova a visualização desta POC sem impactar dados reais.</p>
    </div>
    <a asp-action="Index" class="btn-link"
       data-open-tab data-close-current-tab data-tab="Gráficos" data-url='@Url.Action("Index", "Graficos")'>Cancelar</a>
</section>

<div class="alert danger">
    Confirma a exclusão do gráfico <strong>@Model.Descricao</strong>? A remoção é apenas visual nesta demonstração.
</div>

<article class="detail-card">
    <h2>Resumo do gráfico</h2>
    <dl class="detail-list">
        <div class="detail-list__item">
            <dt>Origem</dt>
            <dd>@Model.Origem.GetDisplayName()</dd>
        </div>
        <div class="detail-list__item">
            <dt>Tipo</dt>
            <dd>@Model.Tipo.GetDisplayName()</dd>
        </div>
        @if (Model.Origem == Enums.TipoOrigemGrafico.Paciente && !string.IsNullOrWhiteSpace(Model.CampoDescricao))
        {
            <div class="detail-list__item">
                <dt>Campo do paciente</dt>
                <dd>@Model.CampoDescricao</dd>
            </div>
        }
        @if (Model.Origem == Enums.TipoOrigemGrafico.Formulario)
        {
            <div class="detail-list__item">
                <dt>Formulário</dt>
                <dd>@(string.IsNullOrWhiteSpace(Model.FormularioDescricao) ? "Formulário selecionado" : Model.FormularioDescricao)</dd>
            </div>
            <div class="detail-list__item">
                <dt>Campo</dt>
                <dd>@(string.IsNullOrWhiteSpace(Model.CampoDescricao) ? "Campo selecionado" : Model.CampoDescricao)</dd>
            </div>
        }
    </dl>
</article>

<form action='@Url.Action("Delete", "Graficos")' method="post"
      data-success-tab="Gráficos"
      data-success-url='@Url.Action("Index", "Graficos")'
      data-close-on-success="true">
    @Html.AntiForgeryToken()
    @Html.HiddenFor(m => m.GraficoId)
    <button type="submit" class="btn-danger">Excluir gráfico</button>
    <a asp-action="Index" class="btn-secondary"
       data-open-tab data-close-current-tab data-tab="Gráficos" data-url='@Url.Action("Index", "Graficos")'>Manter gráfico</a>
</form>
