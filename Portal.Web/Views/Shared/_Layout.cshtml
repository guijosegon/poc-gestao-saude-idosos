@inject Microsoft.AspNetCore.Antiforgery.IAntiforgery Antiforgery
@{
    var antiForgeryTokens = Antiforgery.GetAndStoreTokens(Context);

    string? ObterMensagem(string viewDataKey, string tempDataKey)
    {
        if (ViewData[viewDataKey] is string mensagemView && !string.IsNullOrWhiteSpace(mensagemView))
        {
            return mensagemView;
        }

        if (TempData.TryGetValue(tempDataKey, out var valorTemp) && valorTemp is string mensagemTemp && !string.IsNullOrWhiteSpace(mensagemTemp))
        {
            return mensagemTemp;
        }

        return null;
    }

    var mensagemSucesso = ObterMensagem("TempDataSucesso", "Sucesso");
    var mensagemErro = ObterMensagem("TempDataErro", "Erro");
    var erroAtual = ViewData["Erro"] as string;
}

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Portal</title>
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico" />
    <link rel="stylesheet" href="~/css/site.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <meta name="request-verification-token" content="@antiForgeryTokens.RequestToken" />

    @RenderSection("Styles", required: false)
</head>
<body>
    <div class="global-alerts">
        @if (!string.IsNullOrWhiteSpace(mensagemSucesso))
        {
            <div class="alert success" role="alert">@mensagemSucesso</div>
        }
        @if (!string.IsNullOrWhiteSpace(mensagemErro))
        {
            <div class="alert danger" role="alert">@mensagemErro</div>
        }
        @if (!string.IsNullOrWhiteSpace(erroAtual))
        {
            <div class="alert danger" role="alert">@erroAtual</div>
        }
    </div>

    <main role="main" class="container">
        @RenderBody()
    </main>

    <div id="app-modal" class="modal-overlay" hidden>
        <div class="modal-overlay__backdrop" data-modal-close></div>
        <div class="modal-overlay__container" role="dialog" aria-modal="true">
            <div class="modal-overlay__content" data-modal-content></div>
        </div>
    </div>

    <footer class="footer">
        <small>&copy; @DateTime.UtcNow.Year - Portal Gest√£o Asilos</small>
    </footer>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/js/site.js"></script>

    @RenderSection("Scripts", required: false)
</body>
</html>
